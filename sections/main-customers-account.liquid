<section class="hidden-tablet hidden-tablet-and-up">
	<div class="header-me container">
		{%- if customer -%}
			<input type="checkbox" id="account-input" class="account-input hidden">
			<ul class="logged">
				<li class=" text-l name"><span class="hi">Hi!&nbsp;</span>{{ customer.first_name }}</li>
				<li class=" text-r tab"><label for="account-input">{%- render 'icon', icon: 'arrow-bottom' -%}</label></li>
			</ul>
			<div class="account-box">
				<a href="{{ routes.account_url }}"
					 class="value-picker__choice-item is-selected">{{ 'customer.general.orders' | t }} {% render 'icon', icon: 'check-2' %}</a>
				<a href="{{ routes.account_addresses_url }}"
					 class="value-picker__choice-item">{{ 'customer.general.addresses' | t }} {% render 'icon', icon: 'check-2' %}</a>
				<a href="{{ routes.account_logout_url }}" class="value-picker__choice-item"
					 data-no-instant>{{ 'customer.general.logout' | t }} {% render 'icon', icon: 'check-2' %}</a>
			</div>
		{%- else -%}
			<ul class="no-logged">
				<li class="text-l"><a href="{{ routes.account_login_url }}?return_url={{ page.url }}">LOGIN &gt;</a></li>
				<li class="text-r"><a href="{{ routes.account_register_url }}">CREATE ACCOUNT&gt;</a></li>
			</ul>
		{%- endif -%}
	</div>
	<div class="order-me container">
		<h2>{{- 'customer.general.orders' | t -}}</h2>

		<div class="icon-box">
			<ul class="icons" id="orders-list">
				<li data-item="orders-all" class="current" >
					{%- render 'icon', icon: 'cjj_all' -%}<br/>
					<span>All</span>
				</li>
				<li data-item="orders-unpaid">
					{%- render 'icon', icon: 'cjj_unpaid' -%}<br/>
					<span>Unpaid</span>
				</li>
				<li data-item="orders-processing">
					{%- render 'icon', icon: 'cjj_processing' -%}<br/>
					<span>Processing</span>
				</li>
				<li data-item="orders-shipped">
					{%- render 'icon', icon: 'cjj_shipped' -%}<br/>
					<span>Shipped</span>
				</li>
				<li data-item="orders-payment">
					{%- render 'icon', icon: 'cjj_payment' -%}<br/>
					<span>Payment</span>
				</li>
				<li data-item="orders-completed">
					{%- render 'icon', icon: 'cjj_completed' -%}<br/>
					<span>Completed</span>
				</li>
				<li data-item="post-sale">
					{%- render 'icon', icon: 'cjj_post_sale' -%}<br/>
					<span>Post-sale</span>
				</li>
			</ul>
		</div>

	</div>
	<div class="body-me loading" id="loading">
		{%- render 'icon', icon: 'cjj_loading' -%}
		<span class="loading-text">&nbsp;loading...</span>
	</div>
	<div class="card__section" id="order_null">
			<div class="empty-state empty-state--extra-tight">
				<div class="empty-state__icon">
					{%- render 'icon', icon: 'package' -%}
					<span class="empty-state__count">0</span>
				</div>
				<p class="empty-state__icon-description">{{ 'customer.general.no_orders' | t }}</p>
				<div class="empty-state__button-container">
					<a href="{{ routes.all_products_collection_url }}"
						 class="empty-state__button button button--primary">{{ 'customer.general.no_orders_button' | t }}</a>
				</div>
			</div>
		</div>

	<div class="body-me" id="body_me">
		<!--渲染订单区域-->
	</div>
	<div class="post" id="post">
		<div class="container">
			<h3>
				{%- render 'icon', icon: 'bi-email' -%}&nbsp;&nbsp;
				<a href="mailto:contactus@hyfol.com" target="_blank" rel="noopener" aria-describedby="a11y-new-window-message">contactus@hyfol.com</a>
			</h3>
		</div>
	</div>
	<div class="advert-me container">
		<ul>
			<li><a href="{{ routes.cart_url }}">SHOPPING CART</a></li>
			<li><a href="{{ routes.root_url }}collections/hot-sale">HOT SALE</a></li>
		</ul>
	</div>
</section>

<section data-section-id="{{ section.id }}" data-section-type="account" class="hidden-phone">
	<div class="container container--flush">
		<div class="page__sub-header">
			<nav aria-label="{{ 'general.breadcrumb.title' | t }}" class="breadcrumb">
				<ol class="breadcrumb__list" role="list">
					<li class="breadcrumb__item">
						<a class="breadcrumb__link link"
							 href="{{ routes.root_url }}">{{ 'general.breadcrumb.home' | t }}</a> {%- render 'icon', icon: 'arrow-right' -%}
					</li>

					<li class="breadcrumb__item">
						<a class="breadcrumb__link link"
							 href="{{ routes.account_url }}">{{ 'general.breadcrumb.account' | t }}</a> {%- render 'icon', icon: 'arrow-right' -%}
					</li>

					<li class="breadcrumb__item">
						<span class="breadcrumb__link" aria-current="page">{{ 'customer.general.orders' | t }}</span>
					</li>
				</ol>
			</nav>
		</div>

		<div class="layout">
			<div class="layout__section layout__section--secondary">
				<div class="card card--sticky hidden-pocket">
					<div class="card__section card__section--tight">
						<div class="card__linklist">
							<a href="{{ routes.account_url }}"
								 class="card__linklist-item link text--strong">{{ 'customer.general.orders' | t }}</a>
							<a href="{{ routes.account_addresses_url }}"
								 class="card__linklist-item link">{{ 'customer.general.addresses' | t }}</a>
							<a href="{{ routes.account_logout_url }}" class="card__linklist-item link"
								 data-no-instant>{{ 'customer.general.logout' | t }}</a>
						</div>
					</div>
				</div>

				<div class="value-picker-wrapper hidden-tablet-and-up">
					<button class="value-picker-button value-picker-button--pill" aria-haspopup="true" aria-expanded="false"
									aria-controls="account-selector" data-action="open-value-picker">
						{{- 'customer.general.orders' | t -}} {%- render 'icon', icon: 'arrow-bottom' -%}
					</button>

					<div id="account-selector" class="value-picker" aria-hidden="true">
						<div class="value-picker__inner">
							<header class="value-picker__header">
								<span class="value-picker__title text--strong">{{ 'customer.general.my_account' | t }}</span>
								<button class="value-picker__close" data-action="close-value-picker" aria-controls="account-selector"
												aria-label="{{ 'general.accessibility.close' | t }}">{% render 'icon', icon: 'close' %}</button>
							</header>

							<div class="value-picker__choice-list">
								<a href="{{ routes.account_url }}"
									 class="value-picker__choice-item is-selected">{{ 'customer.general.orders' | t }} {% render 'icon', icon: 'check-2' %}</a>
								<a href="{{ routes.account_addresses_url }}"
									 class="value-picker__choice-item">{{ 'customer.general.addresses' | t }} {% render 'icon', icon: 'check-2' %}</a>
								<a href="{{ routes.account_logout_url }}" class="value-picker__choice-item"
									 data-no-instant>{{ 'customer.general.logout' | t }} {% render 'icon', icon: 'check-2' %}</a>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="layout__section">
				<div class="card">
					<div
						class="{% if customer.orders.size == 0 %}card__section card__section--tight{% else %}card__header card__header--tight{% endif %}">
						<h1
							class="heading h1">{{ 'customer.general.orders' | t }} {% if customer.orders.size > 0 %}({{ customer.orders.size }}){% endif %}</h1>
					</div>

					{%- if customer.orders.size == 0 -%}
						<div class="card__section">
							<div class="empty-state empty-state--extra-tight">
								<div class="empty-state__icon">
									{%- render 'icon', icon: 'package' -%}
									<span class="empty-state__count">0</span>
								</div>

								<p class="empty-state__icon-description">{{ 'customer.general.no_orders' | t }}</p>

								<div class="empty-state__button-container">
									<a href="{{ routes.all_products_collection_url }}"
										 class="empty-state__button button button--primary">{{ 'customer.general.no_orders_button' | t }}</a>
								</div>
							</div>
						</div>
					{%- else -%}
						{%- paginate customer.orders by 8 -%}
							<div class="table-wrapper">
								<table class="table table--loose">
									<thead>
									<tr>
										<th>{{ 'customer.order.order' | t }}</th>
										<th>{{ 'customer.order.date' | t }}</th>
										<th>{{ 'customer.order.payment_status' | t }}</th>
										<th>{{ 'customer.order.fulfillment_status' | t }}</th>
										<th class="table__cell--right">{{ 'customer.order.total' | t }}</th>
									</tr>
									</thead>

									<tbody>
									{%- for order in customer.orders -%}
										<tr>
											<td><a href="{{ order.customer_url }}" class="link link--accented">{{ order.name }}</a></td>
											<td>{{ order.created_at | date: format: 'month_day_year' }}</td>
											<td>{{ order.financial_status_label }}</td>
											<td>{{ order.fulfillment_status_label }}</td>
											<td class="table__cell--right">{{ order.total_price | money }}</td>
										</tr>
									{%- endfor -%}
									</tbody>
								</table>
							</div>

						{%- render 'pagination', paginate: paginate -%}
						{% assign dm_paginate_by = paginate.page_size %}{%- endpaginate -%}
					{%- endif -%}
				</div>
			</div>
		</div>
	</div>
</section>

{% if dm_paginate_by %}{% render 'spurit_dmr_collection_template_snippet', paginate_by: dm_paginate_by %}{% endif %}

<style>
	#shopify-section-footer {
		display: none;
	}
	body {
		min-height: 100vh;
		background: #f0f0f0;
	}
	main ul, li {
		list-style: none;
		padding: 0;
		margin: 0;
	}

	.header-me {
		background-color: #fff;
	}

	.header-me .logged .name {
		font-family: var(--heading-font-family);
		font-weight: var(--heading-font-weight);
		font-style: var(--heading-font-style);
	}
	.header-me .logged .tab label {
		cursor: pointer;
	}
	.header-me .logged .hi {
		color: var(--link-color);
	}
	.header-me .account-box {
		height: 0;
		overflow: hidden;
		transition: all 0.4s ease;
	}
	#account-input:checked ~ .account-box {
		height: 130px;
		transition: all 0.4s ease;
	}
	.header-me .logged > .tab {
		transition: all 0.4s ease;
	}
	#account-input:checked ~ .logged > .tab {
		transform: rotate(180deg);
		-ms-transform: rotate(180deg); /* IE 9 */
		-moz-transform: rotate(180deg); /* Firefox */
		-webkit-transform: rotate(180deg); /* Safari 和 Chrome */
		-o-transform: rotate(180deg);
	}
	.header-me .no-logged,
	.header-me .logged {
		display: flex;
		padding: 20px 0;
	}
	.header-me .logged {
		justify-content: space-between;
	}

	.header-me .no-logged li {
		flex: 1 0 auto;
	}

	.header-me .no-logged li a {
		font-family: var(--heading-font-family);
		font-weight: var(--heading-font-weight);
		font-style: var(--heading-font-style);
	}

	.order-me {
		background-color: #fff;
		margin-top: 10px;
	}

	.order-me h2 {
		font-family: var(--heading-font-family);
		font-weight: var(--heading-font-weight);
		font-style: var(--heading-font-style);
		padding: 10px 0;
	}
	.order-me .icon-box {
		overflow-x: scroll;
		width: 100%;
		padding-bottom: 10px;
	}

	.order-me .icons {
		width: 160%;
		display: flex;
		justify-content: space-between;
	}
	.order-me .icons li {
		cursor: pointer;
	}
	.order-me .icon {
		font-size: 2em;
	}
	.order-me span {
		font-size: 0.85rem;
	}
	.order-me .current {
		color: #b82928;
	}
	.body-me {
		margin-top: 10px;
		background-color: #f0f0f0;
	}
	.body-me .card{
	border: none;
	}
	.body-me.loading {
		color: #666666;
		width: 100%;
		height: 60px;
		font-size: 2em;
		text-align: center;
		background-color: #FFFFFF;
	}
	.body-me.loading > svg {
		animation: loading;
		animation-duration: .3s;
		animation-iteration-count: infinite;
		animation-timing-function: linear;
	}
	.body-me.loading > .loading-text {
		font-size: 0.8rem;
	}
	@keyframes loading {
		from {
			transform: rotate(0);
		}
		to {
			transform: rotate(45deg);
		}
	}
	.body-me .card {
		background-color: #f0f0f0;
		padding: 10px;
	}
	.body-me .order-box {
		margin-bottom: 10px;
		border-radius: 5px;
		padding: 20px;
		background-color: #fff;
	}
	.body-me .order-title {
		display: flex;
		justify-content: space-between;
	}
	.body-me .order-title .title-info > span {
		display: block;
	}
	.body-me .order-title .title-info-name {
		font-family: var(--heading-font-family);
		font-weight: var(--heading-font-weight);
		font-style: var(--heading-font-style);
	}
	.body-me .order-title .title-info-data {
		font-size: 0.8rem;
		color: #666666;
	}
	.body-me .order-body {
		padding-top: 10px;
	}
	.body-me .order-body li {
		display: flex;
		justify-content: space-between;
		padding: 5px 0;
	}
	.body-me .order-body .pro-img {
		width: 30%;
	}
	.body-me .order-body .pro-img > div {
		border: 1px solid #dddddd;
		overflow: hidden;
		border-radius: 10px;
	}
	.body-me .order-body .pro-info {
		width: 70%;
		padding: 0 10px;
	}
	.body-me .order-body .pro-info .info-title {
		font-weight: 700;
		overflow: hidden;
		text-overflow: ellipsis;
		display: -webkit-box;
		-webkit-box-orient: vertical;
		-webkit-line-clamp: 2;
	}
	.body-me .order-body .pro-info .info-style {
		display: flex;
		justify-content: space-between;
		color: #666666;
	}
	.body-me .order-footer {
		text-align: right;
	}
	.body-me .order-footer .all-total {
		font-family: var(--heading-font-family);
		font-weight: var(--heading-font-weight);
		font-style: var(--heading-font-style);
		color: #B82928;
	}
	.post{
		background-color: #fff;
		text-align: center;
		min-height: 100px;
		margin-top: 10px;
		display: none;
	}
	.post h3{
		line-height: 100px;
		font-size: 1.3rem;
	}
	.icon-box li {
		display: inline-block;
		text-align: center;
	}

	.text-l {
		text-align: left;
	}

	.text-r {
		text-align: right;
	}
	.hidden {
		display: none;
	}

	.advert-me {
		background-color: #fff;
		margin-top: 10px;
		min-height: 400px;
	}
	.advert-me ul {
		padding: 50px 20px 0;
	}
	.advert-me li {
		height: 50px;
		line-height: 50px;
		width: 100%;
		text-align: center;
		margin-bottom: 20px;
		background-color: #707070;
	}
	.advert-me li a {
		font-family: var(--heading-font-family);
		font-weight: var(--heading-font-weight);
		font-style: var(--heading-font-style);
		color: #ffffff;
		text-shadow: -2px 1px 3px rgba(0, 0, 0, .5);
	}
</style>
<script>

  ~function () {
    let getDataFlag = false;

    function getData(url, fn) {
      if (getDataFlag) return;
      getDataFlag = true;
      let http = new XMLHttpRequest();
      http.open('GET', url);
      http.send();
      http.onreadystatechange = () => {
        if (http.readyState == 4) {
          getDataFlag = false;
          if (http.status == 200) {
            fn(http.responseText);
          }
        }
      }
    }

    function loading(bool) {
      let loading = document.querySelector('#loading')
      let body_me = document.querySelector('#body_me')
      let nullbox=document.querySelector('#order_null')
      if (bool) {
        loading.style.display = 'block';
        body_me.innerHTML = ''
        nullbox.style.display='none'
      } else {
        loading.style.display = 'none';
      }
    }

    function upData(data) {
      loading(false);
      let body_me = document.querySelector('#body_me')
      body_me.style.display='block'
      body_me.innerHTML = data
			isnull()
    }

    function isnull(){
			let fag=document.querySelectorAll('.card .order-box')
			let nullbox=document.querySelector('#order_null')
			let body_me=document.querySelector('#body_me')
      console.log(fag.length)
      if(!fag.length){
        nullbox.style.display='block'
        body_me.style.display='none'
			}else{
        nullbox.style.display='none'
			}
		}

    function event() {
      let orders_list = document.querySelector("#orders-list")
      let orders_li = document.querySelectorAll("#orders-list>li")
      let post=document.querySelector('#post');
      let body_me = document.querySelector('#body_me')
      orders_list.onclick = (ev) => {
        let target = ev.target;
        if (target.tagName === "LI") {
          for (let i = 0; i < orders_li.length; i++) {
            orders_li[i].classList.remove('current')
          }
          target.classList.add('current')
          let item = target.dataset.item;
          if (item !== 'post-sale') {
            post.style.display='none'
            loading(true);
            let url = '?section_id=my-'+ item;
            getData(url, upData)
          } else {
            body_me.style.display='none'
						post.style.display='block'
          }
        }

      }
    }

    function init() {
      let url = '?section_id=my-orders-all';
      let nullbox=document.querySelector('#order_null')
      nullbox.style.display='none'
      getData(url, upData)
    }
    event();
    init();
  }()

</script>

{% schema %}
{
	"name": "Account"
}
{% endschema %}
<script>
    console.log("order",{{customer.orders[0].id}})
</script>

